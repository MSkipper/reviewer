{% extends 'AppBundle::layout.html.twig' %}

{% macro curly(contents) %}
    {{ '{{' ~ contents ~ '}}' }}
{% endmacro %}
{% import _self as ng %}

{% block body %}

    <div class='container-fluid' ng-controller="ProductSearchController">

        <input type="text"
               ng-model="product"
               placeholder="Podaj nazwę produktu"
               uib-typeahead="product as product.word for product in getLocation($viewValue)"
               typeahead-loading="loadingLocations"
               typeahead-no-results="noResults"
               typeahead-template-url="{{ asset('bundles/app/templates/product-result.tpl.html') }}"
               typeahead-on-select="onSelect($item, $model)"
               class="form-control">

        <div ng-show="product.word">
            <h4>Basic info</h4>
            <pre>Product header: {{ ng.curly('product | json') }}</pre>
        </div>

        <i ng-show="loadingLocations" class="glyphicon glyphicon-refresh"></i>

        <div ng-show="noResults">
            <i class="glyphicon glyphicon-remove"></i> Brak wyników
        </div>

    </div>

    <div ng-show="product.id"
         class='container-fluid' ng-controller="ProductController">

        <h4>Product info</h4>
        <pre>{{ ng.curly('product | json') }}</pre>

        <button type="button" class="btn btn-primary"
                ng-click="getProductReviews(product.id)">
            Ładuj komentarze
        </button>
    </div>
{% endblock %}