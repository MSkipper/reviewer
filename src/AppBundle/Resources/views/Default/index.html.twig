{% extends 'AppBundle::layout.html.twig' %}

{% macro curly(contents) %}{% spaceless %}
    {{ '{{' ~ contents ~ '}}' }}{% endspaceless %}
{% endmacro %}
{% import _self as ng %}

{% block body %}


    <div id="search" clas="open" ng-controller="ProductSearchController">

            <input type="search"
                   ng-model="searchProduct"
                   placeholder="Podaj nazwę produktu"
                   uib-typeahead="searchProduct as searchProduct.word for searchProduct in getLocation($viewValue)"
                   typeahead-min-length="1"
                   typeahead-no-results="noResults"
                   typeahead-template-url="{{ asset('bundles/app/templates/product-result.tpl.html') }}"
                   typeahead-popup-template-url="{{ asset('bundles/app/templates/product-popup.tpl.html') }}"
                   typeahead-on-select="onSelect($item, $model)"
                   ng-model-options="{debounce: 500}"
                   id="search-input"
                   {#ng-style="{'background': 'url('+(searchProduct.image)+') no-repeat scroll 100px 100%'}"#}>

        <div loading-mask class="loading"></div>

        <ul ng-show="noResults" class="dropdown-menu custom-popup" role="listbox"
            uib-dropdown uib-dropdown-toggle auto-close="disabled" is-open="true"
            ng-style="{top: position().top+'px', width: 0.7*position().width+'px', 'height': 8*position().height + 'px'}"
            style="display: block; width: 70%;">
            <li class="text-center text-danger">
                <a>
                    <span class="text-danger glyphicon glyphicon-remove" style="margin: 15px"></span>
                    <span class="ng-binding"><strong>Brak wyników</strong></span>
                </a>
            </li>
        </ul>


    </div>


</div>
<div class="row">


<div class="col-md-1"></div>
<div class="col-md-10 center-block">
    <div id="console" class="center-block">
    <div ng-show="loaderValue">
        <uib-progressbar max="loaderMax" value="loaderValue"><span style="color:white; white-space:nowrap;">{{ ng.curly('loaderValue/loaderMax*100| number:0') }}%</span></uib-progressbar>
    </div>
</div>
</div>
    {#ng-show="product.id"#}
    <div
    ng-show="product.id"
         class='container' ng-controller="ProductController">

        <div class="button-list">
            <div class="btn-group-justified">
                <a href="#" class="btn btn-primary" ng-click="getProductInfo()">Pobierz informacje</a>
                <a href="#" ng-disabled="!product.reviews" class="btn btn-primary">Szukaj podobnych</a>
                <a href="#" class="btn btn-primary">Zapisz dane</a>
            </div>
            <button type="button" class="btn btn-default btn-xs pull-right" ng-click="slideToggle(); isCollapsed = !isCollapsed; " style="width:10%">
                <span class="glyphicon glyphicon-arrow-{{ ng.curly('isCollapsed?"down":"up"') }}"></span>{{ ng.curly('isCollapsed?"Pokaż":"Zwiń"') }} dane
            </button>
        </div>
        <div class="clearfix"></div>
        <div class="row" id="json-data">
            <div class="col-md-12">

                <pre class="json-data" >{{ ng.curly('product | json') }}</pre>

            </div>
        </div>


    </div>
{% endblock %}